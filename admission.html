<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Registration & Payment Receipt - Computer & Digital Excellence</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #667eea;
            --primary-dark: #764ba2;
            --secondary-color: #f093fb;
            --success-color: #4ade80;
            --warning-color: #fbbf24;
            --danger-color: #f87171;
            --info-color: #60a5fa;
            --dark-color: #1f2937;
            --light-color: #f8fafc;
            --border-color: #e2e8f0;
            --text-color: #334155;
            --text-muted: #64748b;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
            color: var(--text-color);
        }

        .receipt-container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            backdrop-filter: blur(10px);
        }

        .receipt-header {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            padding: 40px 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .receipt-header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="white" opacity="0.05"/><circle cx="50" cy="10" r="0.5" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            animation: float 20s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            50% { transform: translate(-20px, -20px) rotate(180deg); }
        }

        .company-name {
            font-size: 32px;
            font-weight: 800;
            margin-bottom: 8px;
            letter-spacing: 2px;
            position: relative;
            z-index: 1;
        }

        .company-subtitle {
            font-size: 16px;
            margin-bottom: 20px;
            opacity: 0.9;
            font-weight: 600;
            position: relative;
            z-index: 1;
        }

        .company-address {
            font-size: 14px;
            opacity: 0.8;
            line-height: 1.6;
            position: relative;
            z-index: 1;
        }

        .receipt-body {
            padding: 40px;
        }

        .receipt-title {
            text-align: center;
            font-size: 28px;
            color: var(--dark-color);
            margin-bottom: 40px;
            font-weight: 700;
            position: relative;
        }

        .receipt-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            border-radius: 2px;
        }

        .form-section {
            margin-bottom: 40px;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: var(--shadow);
            background: white;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .form-section:hover {
            box-shadow: var(--shadow-lg);
            transform: translateY(-2px);
        }

        .section-header {
            background: linear-gradient(135deg, var(--dark-color), #374151);
            color: white;
            padding: 20px 25px;
            font-size: 18px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .section-header::before {
            content: attr(data-step);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            font-size: 14px;
            font-weight: 700;
        }

        .section-description {
            background: linear-gradient(135deg, #f8fafc, #e2e8f0);
            padding: 15px 25px;
            font-size: 14px;
            color: var(--text-muted);
            border-bottom: 1px solid var(--border-color);
        }

        .section-content {
            padding: 30px 25px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin-bottom: 24px;
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark-color);
            font-size: 14px;
        }

        .required {
            color: var(--danger-color);
        }

        .form-input, .form-select {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            font-size: 14px;
            transition: all 0.3s ease;
            background: white;
            color: var(--text-color);
        }

        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .date-input {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            gap: 12px;
        }

        .course-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }

        .course-option {
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            position: relative;
            overflow: hidden;
        }

        .course-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .course-option:hover::before {
            left: 100%;
        }

        .course-option:hover {
            border-color: var(--primary-color);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .course-option.selected {
            border-color: var(--primary-color);
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.05), rgba(240, 147, 251, 0.05));
            box-shadow: var(--shadow);
        }

        .course-option input[type="checkbox"] {
            position: absolute;
            opacity: 0;
        }

        .course-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .course-name {
            font-weight: 600;
            color: var(--dark-color);
            font-size: 16px;
        }

        .course-badge {
            background: linear-gradient(135deg, var(--success-color), #22c55e);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .course-pricing {
            display: flex;
            gap: 16px;
            margin-top: 12px;
        }

        .price-option {
            flex: 1;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
        }

        .price-option:hover {
            border-color: var(--primary-color);
            background: rgba(102, 126, 234, 0.05);
        }

        .price-option.selected {
            border-color: var(--primary-color);
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
        }

        .price-option input[type="radio"] {
            position: absolute;
            opacity: 0;
        }

        .price-label {
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            margin-bottom: 4px;
        }

        .price-amount {
            font-size: 18px;
            font-weight: 700;
        }

        .savings-badge {
            background: var(--success-color);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 600;
            margin-top: 4px;
            display: inline-block;
        }

        .payment-plan-section {
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 24px;
            border: 1px solid #0ea5e9;
        }

        .payment-plan-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .payment-plan-icon {
            width: 24px;
            height: 24px;
            background: var(--info-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
        }

        .payment-calculations {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }

        .calc-item {
            background: white;
            padding: 16px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid var(--border-color);
        }

        .calc-label {
            font-size: 12px;
            color: var(--text-muted);
            margin-bottom: 4px;
            text-transform: uppercase;
            font-weight: 600;
        }

        .calc-value {
            font-size: 20px;
            font-weight: 700;
            color: var(--dark-color);
        }

        .receipt-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .info-section {
            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid var(--primary-color);
            position: relative;
            overflow: hidden;
        }

        .info-section::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 60px;
            height: 60px;
            background: var(--primary-color);
            opacity: 0.1;
            border-radius: 50%;
            transform: translate(20px, -20px);
        }

        .info-title {
            font-weight: 700;
            color: var(--dark-color);
            margin-bottom: 12px;
            font-size: 16px;
        }

        .info-content {
            color: var(--text-muted);
            font-size: 14px;
            line-height: 1.6;
        }

        .services-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 30px;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .services-table th {
            background: linear-gradient(135deg, var(--dark-color), #374151);
            color: white;
            padding: 18px 16px;
            text-align: left;
            font-weight: 600;
            font-size: 14px;
        }

        .services-table td {
            padding: 16px;
            border-bottom: 1px solid var(--border-color);
            font-size: 14px;
        }

        .services-table tr:nth-child(even) {
            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
        }

        .services-table tr:hover {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.05), rgba(240, 147, 251, 0.05));
        }

        .total-section {
            background: linear-gradient(135deg, #f8fafc, #e2e8f0);
            padding: 25px;
            border-radius: 16px;
            margin-bottom: 30px;
            border: 1px solid var(--border-color);
        }

        .total-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            font-size: 16px;
            padding: 8px 0;
        }

        .grand-total {
            font-size: 24px;
            font-weight: 800;
            color: var(--dark-color);
            border-top: 2px solid var(--primary-color);
            padding-top: 16px;
            margin-top: 16px;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(240, 147, 251, 0.1));
            padding: 16px;
            border-radius: 8px;
        }

        .payment-method {
            text-align: center;
            background: linear-gradient(135deg, #dcfce7, #bbf7d0);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
            border: 2px solid var(--success-color);
        }

        .payment-status {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 18px;
            font-weight: 700;
            color: #16a34a;
        }

        .receipt-footer {
            text-align: center;
            color: var(--text-muted);
            font-size: 14px;
            border-top: 2px solid var(--border-color);
            padding-top: 30px;
            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
            margin: -25px;
            padding: 30px 25px 25px;
            border-radius: 0 0 16px 16px;
        }

        .thank-you {
            font-size: 20px;
            color: var(--dark-color);
            font-weight: 700;
            margin-bottom: 12px;
        }

        .button-group {
            display: flex;
            gap: 16px;
            justify-content: center;
            margin: 30px auto;
            flex-wrap: wrap;
        }

        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            min-width: 160px;
            justify-content: center;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success-color), #22c55e);
            color: white;
        }

        .btn-print {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }

        /* Print Styles */
        .print-receipt {
            display: none;
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            font-family: 'Arial', sans-serif;
            line-height: 1.4;
            color: #333;
        }

        @media print {
            body {
                background: white;
                padding: 0;
                margin: 0;
            }
            
            body > *:not(.print-receipt) {
                display: none !important;
            }

            .print-receipt {
                display: block !important;
                position: static;
                width: 100%;
                max-width: none;
                margin: 0;
                padding: 20mm;
                box-shadow: none;
                border-radius: 0;
                background-color: white;
                color: #000;
                font-size: 11pt;
                line-height: 1.3;
            }
        }

        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .course-selection {
                grid-template-columns: 1fr;
            }
            
            .receipt-info {
                grid-template-columns: 1fr;
            }
            
            .date-input {
                grid-template-columns: 1fr;
            }

            .payment-calculations {
                grid-template-columns: 1fr;
            }

            .button-group {
                flex-direction: column;
                align-items: center;
            }

            .btn {
                width: 100%;
                max-width: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="receipt-container">
        <div class="receipt-header">
            <div class="company-name">Computer & Digital Excellence</div>
            <div class="company-subtitle">(CODE)</div>
            <div class="company-address">
                Lokenath Nagar, Bagdogra<br>
                Pin Code: 734014<br>
                Phone: +91 96358 09537 | Email: code.bagdogra@gmail.com
            </div>
        </div>

        <div class="receipt-body">
            <h2 class="receipt-title">COURSE REGISTRATION & PAYMENT RECEIPT</h2>

            <div class="form-section">
                <div class="section-header" data-step="1">
                    Personal Information
                </div>
                <div class="section-description">
                    Please fill in your personal details for course registration
                </div>
                <div class="section-content">
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">Full Name <span class="required">*</span></label>
                            <input type="text" class="form-input" id="studentName" placeholder="Enter your full name" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Phone Number <span class="required">*</span></label>
                            <input type="tel" class="form-input" id="phoneNumber" placeholder="+91 XXXXX XXXXX" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Email Address</label>
                            <input type="email" class="form-input" id="email" placeholder="your.email@example.com">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Date of Birth <span class="required">*</span></label>
                            <div class="date-input">
                                <select class="form-select" id="dobMonth" required>
                                    <option value="">Month</option>
                                    <option value="01">January</option>
                                    <option value="02">February</option>
                                    <option value="03">March</option>
                                    <option value="04">April</option>
                                    <option value="05">May</option>
                                    <option value="06">June</option>
                                    <option value="07">July</option>
                                    <option value="08">August</option>
                                    <option value="09">September</option>
                                    <option value="10">October</option>
                                    <option value="11">November</option>
                                    <option value="12">December</option>
                                </select>
                                <input type="number" class="form-input" id="dobDay" placeholder="Day" min="1" max="31" required>
                                <input type="number" class="form-input" id="dobYear" placeholder="Year" min="1950" max="2010" required>
                            </div>
                        </div>
                        
                        <div class="form-group full-width">
                            <label class="form-label">Complete Address <span class="required">*</span></label>
                            <textarea class="form-input" id="address" rows="3" placeholder="Enter your complete address with PIN code" required></textarea>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-section">
                <div class="section-header" data-step="2">
                    Course Selection & Pricing
                </div>
                <div class="section-description">
                    Select your preferred course(s) and payment plan
                </div>
                <!-- Place this button somewhere above or beside the course selection -->
                <div style="margin-bottom: 12px; text-align: right;">
                    <button class="btn" style="background: #f87171; color: white;" onclick="clearAllCourses()">Clear All Courses</button>
                </div>
                <div class="section-content">
                    <div class="course-selection" id="courseSelection">
                        <!-- Courses will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <div class="form-section">
                <div class="section-header" data-step="3">
                    Payment Details & Receipt
                </div>
                <div class="section-content">
                    <div class="receipt-info">
                        <div class="info-section">
                            <div class="info-title">Receipt Details</div>
                            <div class="info-content">
                                <strong>Receipt No:</strong> <span id="receiptNo">CODE-2024-001</span><br>
                                <strong>Date:</strong> <span id="currentDate"></span><br>
                                <strong>Time:</strong> <span id="currentTime"></span>
                            </div>
                        </div>
                        <div class="info-section">
                            <div class="info-title">Student Information</div>
                            <div class="info-content" id="studentInfo">
                                <strong>Name:</strong> <span id="displayName">[Enter name above]</span><br>
                                <strong>Phone:</strong> <span id="displayPhone">[Enter phone above]</span><br>
                                <strong>Email:</strong> <span id="displayEmail">[Enter email above]</span>
                            </div>
                        </div>
                    </div>

                    <table class="services-table">
                        <thead>
                            <tr>
                                <th>Course Description</th>
                                <th>Duration</th>
                                <th>Payment Plan</th>
                                <th>Amount (‚Çπ)</th>
                            </tr>
                        </thead>
                        <tbody id="courseTable">
                            <tr>
                                <td colspan="4" style="text-align: center; padding: 30px; color: #666;">
                                    Select courses above to see pricing details
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="payment-plan-section" id="paymentPlanSection" style="display: none;">
                        <div class="payment-plan-header">
                            <div class="payment-plan-icon">üí≥</div>
                            <h3>Payment Plan Details</h3>
                        </div>
                        <div class="payment-calculations">
                            <div class="calc-item">
                                <div class="calc-label">Total Course Fee</div>
                                <div class="calc-value" id="totalCourseFee">‚Çπ 0</div>
                            </div>
                            <div class="calc-item">
                                <div class="calc-label">Amount Paid Today</div>
                                <div class="calc-value" id="amountPaidToday">‚Çπ 0</div>
                            </div>
                            <div class="calc-item">
                                <div class="calc-label">Remaining Balance</div>
                                <div class="calc-value" id="remainingBalance">‚Çπ 0</div>
                            </div>
                            <div class="calc-item">
                                <div class="calc-label">Monthly Payment</div>
                                <div class="calc-value" id="monthlyPayment">‚Çπ 0</div>
                            </div>
                            <div class="calc-item">
                                <div class="calc-label">Course Completion</div>
                                <div class="calc-value" id="courseCompletion">-</div>
                            </div>
                            <div class="calc-item">
                                <div class="calc-label">Payment Complete By</div>
                                <div class="calc-value" id="paymentCompleteBy">-</div>
                            </div>
                        </div>
                    </div>

                    <div class="form-grid" style="margin-bottom: 20px;">
                        <div class="form-group">
                            <label class="form-label">Payment Method <span class="required">*</span></label>
                            <select class="form-select" id="paymentMethod" onchange="updatePaymentMethod()" required>
                                <option value="">Select Payment Method</option>
                                <option value="Cash">Cash</option>
                                <option value="UPI">UPI</option>
                                <option value="Card">Credit/Debit Card</option>
                                <option value="Bank Transfer">Bank Transfer</option>
                                <option value="Cheque">Cheque</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Discount Amount (‚Çπ)</label>
                            <input type="number" class="form-input" id="discountAmount" placeholder="Enter discount amount" min="0" oninput="updateTotals()">
                        </div>

                        <div class="form-group">
                            <label class="form-label">Amount Paid Today (‚Çπ) <span class="required">*</span></label>
                            <input type="number" class="form-input" id="paidAmount" placeholder="Enter paid amount" min="0" oninput="updateTotals()" required>
                        </div>
                    </div>

                    <div class="total-section">
                        <div class="total-row">
                            <span>Subtotal:</span>
                            <span id="subtotal">‚Çπ 0.00</span>
                        </div>
                        <div class="total-row">
                            <span>Discount:</span>
                            <span id="discount">‚Çπ 0.00</span>
                        </div>
                        <div class="total-row">
                            <span>Amount Paid:</span>
                            <span id="paidAmountDisplay">‚Çπ 0.00</span>
                        </div>
                        <div class="total-row">
                            <span>Due Amount:</span>
                            <span id="dueAmount">‚Çπ 0.00</span>
                        </div>
                        <div class="total-row grand-total">
                            <span>Grand Total:</span>
                            <span id="grandTotal">‚Çπ 0.00</span>
                        </div>
                    </div>

                    <div class="payment-method">
                        <div class="payment-status">
                            <span>üí≥</span>
                            <span><strong>Payment Method:</strong> <span id="displayPaymentMethod">[Select payment method above]</span></span>
                        </div>
                        <div class="payment-status" style="margin-top: 8px;">
                            <span>‚úÖ</span>
                            <span><strong>Payment Status:</strong> PAID</span>
                        </div>
                    </div>

                    <div class="receipt-footer">
                        <div class="thank-you">Thank You for Choosing CODE!</div>
                        <p>For any queries, please contact us at the above details.<br>
                        This is a computer-generated receipt.</p>
                        <p style="margin-top: 15px; font-style: italic;">
                            "Your Digital Solutions Partner"
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="print-receipt" id="printReceipt">
        <div class="print-header" style="text-align: center; border-bottom: 2px solid #2c3e50; padding-bottom: 20px; margin-bottom: 25px;">
            <div style="font-size: 24px; font-weight: bold; color: #2c3e50; margin-bottom: 5px;">Computer & Digital Excellence</div>
            <div style="font-size: 14px; color: #666; margin-bottom: 10px;">(CODE)</div>
            <div style="font-size: 12px; color: #666;">
                Lokenath Nagar, Bagdogra, Pin Code: 734014<br>
                Phone: +91 XXXXX XXXXX | Email: info@code.com
            </div>
        </div>

        <div style="text-align: center; font-size: 20px; font-weight: bold; color: #2c3e50; margin-bottom: 25px; text-transform: uppercase;">Course Registration & Payment Receipt</div>

        <div style="display: flex; justify-content: space-between; margin-bottom: 25px; gap: 20px;">
            <div style="flex: 1;">
                <div style="font-weight: bold; font-size: 14px; color: #2c3e50; border-bottom: 1px solid #ddd; padding-bottom: 5px; margin-bottom: 8px;">Receipt Details</div>
                <div>
                    <strong>Receipt No:</strong> <span id="printReceiptNo"></span><br>
                    <strong>Date:</strong> <span id="printCurrentDate"></span><br>
                    <strong>Time:</strong> <span id="printCurrentTime"></span>
                </div>
            </div>
            <div style="flex: 1;">
                <div style="font-weight: bold; font-size: 14px; color: #2c3e50; border-bottom: 1px solid #ddd; padding-bottom: 5px; margin-bottom: 8px;">Student Information</div>
                <div>
                    <strong>Name:</strong> <span id="printStudentName"></span><br>
                    <strong>Phone:</strong> <span id="printStudentPhone"></span><br>
                    <strong>Email:</strong> <span id="printStudentEmail"></span><br>
                    <strong>Address:</strong> <span id="printStudentAddress"></span>
                </div>
            </div>
        </div>

        <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">
            <thead>
                <tr>
                    <th style="border: 1px solid #ccc; padding: 10px; text-align: left; font-size: 12px; background-color: #e9ecef; font-weight: bold; color: #333;">Course Description</th>
                    <th style="border: 1px solid #ccc; padding: 10px; text-align: left; font-size: 12px; background-color: #e9ecef; font-weight: bold; color: #333;">Duration</th>
                    <th style="border: 1px solid #ccc; padding: 10px; text-align: left; font-size: 12px; background-color: #e9ecef; font-weight: bold; color: #333;">Payment Plan</th>
                    <th style="border: 1px solid #ccc; padding: 10px; text-align: left; font-size: 12px; background-color: #e9ecef; font-weight: bold; color: #333;">Fee (‚Çπ)</th>
                </tr>
            </thead>
            <tbody id="printCourseTable">
            </tbody>
        </table>

        <div style="float: right; width: 300px; margin-bottom: 20px; border: 1px solid #ddd; padding: 10px;">
            <div style="display: flex; justify-content: space-between; padding: 5px 0; border-bottom: 1px solid #eee;">
                <span>Subtotal:</span>
                <span id="printSubtotal">‚Çπ 0.00</span>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 5px 0; border-bottom: 1px solid #eee;">
                <span>Discount:</span>
                <span id="printDiscount">‚Çπ 0.00</span>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 5px 0; border-bottom: 1px solid #eee;">
                <span>Amount Paid:</span>
                <span id="printPaidAmount">‚Çπ 0.00</span>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 5px 0; border-bottom: 1px solid #eee;">
                <span>Due Amount:</span>
                <span id="printDueAmount">‚Çπ 0.00</span>
            </div>
            <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 16px; border-top: 2px solid #2c3e50; border-bottom: double 3px #2c3e50; padding: 10px 0; margin-top: 5px; background-color: #f0f0f0;">
                <span>Grand Total:</span>
                <span id="printGrandTotal">‚Çπ 0.00</span>
            </div>
        </div>

        <div style="clear: both; text-align: center; background-color: #f8f9fa; padding: 15px; border: 1px solid #ddd; margin-bottom: 20px; font-size: 13px;">
            <strong>Payment Method:</strong> <span id="printPaymentMethod"></span><br>
            <strong>Payment Status:</strong> ‚úÖ PAID
        </div>

        <div style="text-align: center; font-size: 11px; color: #666; border-top: 1px solid #ddd; padding-top: 15px; margin-top: 20px;">
            <div style="font-size: 15px; color: #2c3e50; font-weight: bold; margin-bottom: 8px;">Thank You for Choosing CODE!</div>
            <p>For any queries, please contact us at the above details.<br>
            This is a computer-generated receipt.</p>
            <p style="margin-top: 10px; font-style: italic;">
                "Your Digital Solutions Partner"
            </p>
        </div>
    </div>

    <div class="button-group">
        <button class="btn btn-success" onclick="generateReceipt()">
            <span>üìã</span> Generate Receipt
        </button>
        <button class="btn btn-print" onclick="printReceipt()">
            <span>üñ®Ô∏è</span> Print Receipt
        </button>
    </div>

    <script>
        let selectedCourses = [];
        let courseData = {
            'CCA': { 
                fullPrice: 3499, 
                monthlyPrice: 3999, 
                duration: '3 months',
                monthlyInstallments: 3
            },
            'DCA': { 
                fullPrice: 5499, 
                monthlyPrice: 5999, 
                duration: '6 months',
                monthlyInstallments: 6
            },
            'ADCA': { 
                fullPrice: 11999, 
                monthlyPrice: 13999, 
                duration: '12 months',
                monthlyInstallments: 12
            },
            'Web Design Basic': { 
                fullPrice: 6999, 
                monthlyPrice: 7499, 
                duration: '4 months',
                monthlyInstallments: 4
            },
            'Web Design Advanced': { 
                fullPrice: 13999, 
                monthlyPrice: 15999, 
                duration: '8 months',
                monthlyInstallments: 8
            },
            'Ecommerce Expert (Industry Level)': { 
                fullPrice: 29999, 
                monthlyPrice: 33999, 
                duration: '6 months',
                monthlyInstallments: 6
            },
            'Ecommerce Expert (Job Ready)': { 
                fullPrice: 44999, 
                monthlyPrice: 49999, 
                duration: '8 months',
                monthlyInstallments: 8
            },
            'A.I. Prompt Engineering': { 
                fullPrice: 6499, 
                monthlyPrice: 6999, 
                duration: '3 months',
                monthlyInstallments: 3
            },
            'Digital Marketing Basics': { 
                fullPrice: 8999, 
                monthlyPrice: 9999, 
                duration: '2 months',
                monthlyInstallments: 2
            }
        };

        let coursePaymentPlans = {};

        // Initialize the application
        function initializeApp() {
            setDateTime();
            createCourseOptions();
            updateStudentInfo();
            setupEventListeners();
        }

        // Set current date and time
        function setDateTime() {
            const now = new Date();
            const dateOptions = { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            };
            const timeOptions = { 
                hour: '2-digit', 
                minute: '2-digit',
                hour12: true 
            };

            document.getElementById('currentDate').textContent = now.toLocaleDateString('en-IN', dateOptions);
            document.getElementById('currentTime').textContent = now.toLocaleTimeString('en-IN', timeOptions);
            
            // Generate receipt number based on current date
            const receiptNo = 'CODE-' + now.getFullYear() + '-' + String(now.getTime()).slice(-6);
            document.getElementById('receiptNo').textContent = receiptNo;
        }

        // Updated createCourseOptions to fix badge wording
        function createCourseOptions() {
            const courseSelection = document.getElementById('courseSelection');
            courseSelection.innerHTML = '';
        
            Object.keys(courseData).forEach(courseName => {
                const course = courseData[courseName];
                const diff = course.fullPrice - course.monthlyPrice;
                let badgeText = '';
                if (diff > 0) {
                    badgeText = `Save ‚Çπ${diff.toLocaleString('en-IN')}`;
                } else if (diff < 0) {
                    badgeText = `Extra ‚Çπ${Math.abs(diff).toLocaleString('en-IN')}`;
                } else {
                    badgeText = 'No Difference';
                }
        
                const courseDiv = document.createElement('div');
                courseDiv.className = 'course-option';
                courseDiv.onclick = () => toggleCourse(courseDiv, courseName);
        
                courseDiv.innerHTML = `
                    <input type="checkbox" name="courses" value="${courseName}">
                    <div class="course-header">
                        <div class="course-name">${courseName}</div>
                        <div class="course-badge">${course.duration}</div>
                    </div>
                    <div class="course-pricing">
                        <div class="price-option" onclick="selectPaymentPlan(event, '${courseName}', 'full')">
                            <input type="radio" name="${courseName}_plan" value="full">
                            <div class="price-label">Full Payment</div>
                            <div class="price-amount">‚Çπ${course.fullPrice.toLocaleString('en-IN')}</div>
                            <div class="savings-badge">${badgeText}</div>
                        </div>
                        <div class="price-option" onclick="selectPaymentPlan(event, '${courseName}', 'monthly')">
                            <input type="radio" name="${courseName}_plan" value="monthly">
                            <div class="price-label">Monthly Payment</div>
                            <div class="price-amount">‚Çπ${course.monthlyPrice.toLocaleString('en-IN')}</div>
                            <div class="price-label" style="margin-top: 4px;">
                                ‚Çπ${Math.ceil(course.monthlyPrice / course.monthlyInstallments).toLocaleString('en-IN')}/month
                            </div>
                        </div>
                    </div>
                `;
        
                courseSelection.appendChild(courseDiv);
            });
        }
        
        // Fix: ensure plan selection triggers full update
        function selectPaymentPlan(event, courseName, plan) {
            event.stopPropagation();
        
            const courseOption = event.target.closest('.course-option');
            const priceOptions = courseOption.querySelectorAll('.price-option');
        
            // Remove selection from all options
            priceOptions.forEach(option => {
                option.classList.remove('selected');
                const radio = option.querySelector('input[type="radio"]');
                if (radio) radio.checked = false;
            });
        
            // Select current option
            const currentOption = event.target.closest('.price-option');
            currentOption.classList.add('selected');
            const currentRadio = currentOption.querySelector('input[type="radio"]');
            if (currentRadio) currentRadio.checked = true;
        
            // Update payment plan
            coursePaymentPlans[courseName] = plan;
        
            // Ensure the course is marked selected visually and in data
            const checkbox = courseOption.querySelector('input[type="checkbox"]');
            if (checkbox && !checkbox.checked) {
                checkbox.checked = true;
                courseOption.classList.add('selected');
                if (!selectedCourses.includes(courseName)) {
                    selectedCourses.push(courseName);
                }
            }
        
            updateReceipt(); // <--- missing previously
        }
        
        // New: clear all selected courses
        function clearAllCourses() {
            selectedCourses = [];
            coursePaymentPlans = {};
        
            document.querySelectorAll('.course-option').forEach(option => {
                option.classList.remove('selected');
                const checkbox = option.querySelector('input[type="checkbox"]');
                if (checkbox) checkbox.checked = false;
                option.querySelectorAll('.price-option').forEach(po => {
                    po.classList.remove('selected');
                    const radio = po.querySelector('input[type="radio"]');
                    if (radio) radio.checked = false;
                });
            });
        
            updateReceipt();
        }


        // Update receipt with selected courses
        function updateReceipt() {
            const tableBody = document.getElementById('courseTable');
            tableBody.innerHTML = '';
            
            if (selectedCourses.length === 0) {
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="4" style="text-align: center; padding: 30px; color: #666;">
                            Select courses above to see pricing details
                        </td>
                    </tr>
                `;
                document.getElementById('paymentPlanSection').style.display = 'none';
                updateTotals();
                return;
            }
            
            selectedCourses.forEach(courseName => {
                const course = courseData[courseName];
                const plan = coursePaymentPlans[courseName] || 'full';
                const price = plan === 'full' ? course.fullPrice : course.monthlyPrice;
                const planText = plan === 'full' ? 'Full Payment' : 'Monthly Payment';
                
                const row = `
                    <tr>
                        <td>${courseName}</td>
                        <td>${course.duration}</td>
                        <td>${planText}</td>
                        <td>‚Çπ${price.toLocaleString('en-IN')}</td>
                    </tr>
                `;
                tableBody.innerHTML += row;
            });
            
            document.getElementById('paymentPlanSection').style.display = 'block';
            updateTotals();
            updatePaymentPlanDetails();
        }

        // Update payment plan details
        function updatePaymentPlanDetails() {
            let totalCourseFee = 0;
            let monthlyPaymentTotal = 0;
            let maxDuration = 0;
            let hasMonthlyPlans = false;

            selectedCourses.forEach(courseName => {
                const course = courseData[courseName];
                const plan = coursePaymentPlans[courseName] || 'full';
                const price = plan === 'full' ? course.fullPrice : course.monthlyPrice;
                
                totalCourseFee += price;
                
                if (plan === 'monthly') {
                    hasMonthlyPlans = true;
                    monthlyPaymentTotal += Math.ceil(price / course.monthlyInstallments);
                    maxDuration = Math.max(maxDuration, course.monthlyInstallments);
                } else {
                    // For full payment courses, consider the duration for completion calculation
                    maxDuration = Math.max(maxDuration, parseInt(course.duration));
                }
            });

            const discountAmount = parseInt(document.getElementById('discountAmount').value) || 0;
            const paidAmount = parseInt(document.getElementById('paidAmount').value) || 0;
            const finalTotal = totalCourseFee - discountAmount;
            const remainingBalance = Math.max(0, finalTotal - paidAmount);

            // Calculate course completion date
            const today = new Date();
            const completionDate = new Date(today);
            completionDate.setMonth(completionDate.getMonth() + maxDuration);

            // Calculate payment completion date (for monthly plans)
            let paymentCompleteDate = '';
            if (hasMonthlyPlans && remainingBalance > 0) {
                const monthsToComplete = Math.ceil(remainingBalance / (monthlyPaymentTotal || 1));
                const paymentDate = new Date(today);
                paymentDate.setMonth(paymentDate.getMonth() + monthsToComplete);
                paymentCompleteDate = paymentDate.toLocaleDateString('en-IN', { 
                    year: 'numeric', 
                    month: 'short', 
                    day: 'numeric' 
                });
            } else if (remainingBalance === 0) {
                paymentCompleteDate = 'Completed';
            } else {
                paymentCompleteDate = 'Full Payment';
            }

            // Update display
            document.getElementById('totalCourseFee').textContent = `‚Çπ${totalCourseFee.toLocaleString('en-IN')}`;
            document.getElementById('amountPaidToday').textContent = `‚Çπ${paidAmount.toLocaleString('en-IN')}`;
            document.getElementById('remainingBalance').textContent = `‚Çπ${remainingBalance.toLocaleString('en-IN')}`;
            document.getElementById('monthlyPayment').textContent = hasMonthlyPlans ? `‚Çπ${monthlyPaymentTotal.toLocaleString('en-IN')}` : 'N/A';
            document.getElementById('courseCompletion').textContent = completionDate.toLocaleDateString('en-IN', { 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric' 
            });
            document.getElementById('paymentCompleteBy').textContent = paymentCompleteDate;
        }

        // Update totals
        function updateTotals() {
            let subtotal = 0;
            selectedCourses.forEach(courseName => {
                const course = courseData[courseName];
                const plan = coursePaymentPlans[courseName] || 'full';
                const price = plan === 'full' ? course.fullPrice : course.monthlyPrice;
                subtotal += price;
            });

            const discountAmount = parseInt(document.getElementById('discountAmount').value) || 0;
            const paidAmount = parseInt(document.getElementById('paidAmount').value) || 0;
            const grandTotal = Math.max(0, subtotal - discountAmount);
            const dueAmount = Math.max(0, grandTotal - paidAmount);

            document.getElementById('subtotal').textContent = '‚Çπ ' + subtotal.toLocaleString('en-IN') + '.00';
            document.getElementById('discount').textContent = '‚Çπ ' + discountAmount.toLocaleString('en-IN') + '.00';
            document.getElementById('paidAmountDisplay').textContent = '‚Çπ ' + paidAmount.toLocaleString('en-IN') + '.00';
            document.getElementById('dueAmount').textContent = '‚Çπ ' + dueAmount.toLocaleString('en-IN') + '.00';
            document.getElementById('grandTotal').textContent = '‚Çπ ' + grandTotal.toLocaleString('en-IN') + '.00';
        }

        // Update payment method display
        function updatePaymentMethod() {
            const paymentMethod = document.getElementById('paymentMethod').value || '[Select payment method above]';
            document.getElementById('displayPaymentMethod').textContent = paymentMethod;
        }

        // Update student info in receipt
        function updateStudentInfo() {
            const name = document.getElementById('studentName').value || '[Enter name above]';
            const phone = document.getElementById('phoneNumber').value || '[Enter phone above]';
            const email = document.getElementById('email').value || '[Enter email above]';

            document.getElementById('displayName').textContent = name;
            document.getElementById('displayPhone').textContent = phone;
            document.getElementById('displayEmail').textContent = email;
        }

        // Generate receipt
        function generateReceipt() {
            updateStudentInfo();
            updateReceipt();
            updatePaymentMethod();
            populatePrintReceipt();
            document.querySelector('.form-section:last-child').scrollIntoView({ behavior: 'smooth' });
        }

        // Populate print receipt with current data
        function populatePrintReceipt() {
            // Copy receipt details
            document.getElementById('printReceiptNo').textContent = document.getElementById('receiptNo').textContent;
            document.getElementById('printCurrentDate').textContent = document.getElementById('currentDate').textContent;
            document.getElementById('printCurrentTime').textContent = document.getElementById('currentTime').textContent;

            // Copy student information
            document.getElementById('printStudentName').textContent = document.getElementById('studentName').value || '[Not provided]';
            document.getElementById('printStudentPhone').textContent = document.getElementById('phoneNumber').value || '[Not provided]';
            document.getElementById('printStudentEmail').textContent = document.getElementById('email').value || '[Not provided]';
            document.getElementById('printStudentAddress').textContent = document.getElementById('address').value || '[Not provided]';

            // Copy course table
            const printTableBody = document.getElementById('printCourseTable');
            printTableBody.innerHTML = '';
            if (selectedCourses.length === 0) {
                printTableBody.innerHTML = `
                    <tr><td colspan="4" style="text-align: center; padding: 20px;">No courses selected</td></tr>
                `;
            } else {
                selectedCourses.forEach(courseName => {
                    const course = courseData[courseName];
                    const plan = coursePaymentPlans[courseName] || 'full';
                    const price = plan === 'full' ? course.fullPrice : course.monthlyPrice;
                    const planText = plan === 'full' ? 'Full Payment' : 'Monthly Payment';
                    
                    const row = `
                        <tr>
                            <td style="border: 1px solid #ccc; padding: 10px; font-size: 12px;">${courseName}</td>
                            <td style="border: 1px solid #ccc; padding: 10px; font-size: 12px;">${course.duration}</td>
                            <td style="border: 1px solid #ccc; padding: 10px; font-size: 12px;">${planText}</td>
                            <td style="border: 1px solid #ccc; padding: 10px; font-size: 12px;">‚Çπ${price.toLocaleString('en-IN')}</td>
                        </tr>
                    `;
                    printTableBody.innerHTML += row;
                });
            }

            // Copy totals
            document.getElementById('printSubtotal').textContent = document.getElementById('subtotal').textContent;
            document.getElementById('printDiscount').textContent = document.getElementById('discount').textContent;
            document.getElementById('printPaidAmount').textContent = document.getElementById('paidAmountDisplay').textContent;
            document.getElementById('printDueAmount').textContent = document.getElementById('dueAmount').textContent;
            document.getElementById('printGrandTotal').textContent = document.getElementById('grandTotal').textContent;

            // Copy payment method
            document.getElementById('printPaymentMethod').textContent = document.getElementById('paymentMethod').value || '[Not selected]';
        }

        // Print receipt function
        function printReceipt() {
            populatePrintReceipt();
            window.print();
        }

        // Setup event listeners
        function setupEventListeners() {
            document.getElementById('studentName').addEventListener('input', updateStudentInfo);
            document.getElementById('phoneNumber').addEventListener('input', updateStudentInfo);
            document.getElementById('email').addEventListener('input', updateStudentInfo);
            document.getElementById('address').addEventListener('input', updateStudentInfo);
            document.getElementById('discountAmount').addEventListener('input', updateTotals);
            document.getElementById('paidAmount').addEventListener('input', () => {
                updateTotals();
                updatePaymentPlanDetails();
            });
        }

        // Initialize the application when the page loads
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>
